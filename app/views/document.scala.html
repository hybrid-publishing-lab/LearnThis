@(document: Document) @main("New Document") {

<div class="container" data-ng-controller="DocumentController"
	data-ng-init="init(@document.id)" data-ng-class="{'unsaved': !saved}">
	<div class="site-head row">
		<ol class="breadcrumb">
			<li><a href="/"> < Übersicht </a></li>
		</ol>
		<div class="col-xs-2"></div>
		<div class="jumbotron col-xs-8">
			<h1><textarea class="hidden-form-element" data-ng-model="document.title" data-ng-change="change()" data-ng-blur="saveDoc()">{{document.title}}</textarea></h1>
			<p>Autor: <input type="text" value="{{document.givenname}}" class="hidden-form-element" data-ng-model="document.givenname" data-ng-change="change()" data-ng-blur="saveDoc()" />
				<input type="text" value="{{document.surname}}" class="hidden-form-element" data-ng-model="document.surname" data-ng-change="change()" data-ng-blur="saveDoc()" />
			</p>
			<p>erstellt: @document.createdAt.format("dd.MM.yyyy HH:mm")</p>
			<p>geändert: @document.changedAt.format("dd.MM.yyyy HH:mm")</p>
			<!-- <p>
				<a data-ng-click="saveDoc()">Doc speichern</a>
			</p>
			<p>
				<a data-ng-click="logDoc()">Doc in Console loggen</a>
			</p> -->
		</div>
		<div class="col-xs-2">
			<ul class="nav nav-pills nav-stacked">
				<li><a href='/export/epub/document/{{document.id}}'>EPub</a></li>
				<li><a href="#">HTML</a></li>
				<li><a href="#">PDF</a></li>
				<li><a href="#">XML</a></li>
			</ul>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-2"></div>
		<div class="col-xs-8">
			<nav class="navbar navbar-default" role="navigation">
				<!-- Brand and toggle get grouped for better mobile display -->
				<!-- <div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Brand</a>
				</div>
 -->
				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Nur mit Rückseite</a></li>
					</ul>

				</div>
				<!-- /.navbar-collapse -->
			</nav>
		</div>
		<div class="col-xs-2"></div>
	</div>


	<div ng-model="document.textelements" 
			ui-sortable="sortableOptions">
		<div class="row text-element "
			data-ng-class="{'edit-mode-active': isActive(textelement.id)}"
			data-ng-repeat="textelement in document.textelements | orderBy:sort">
			
			<div class="col-xs-2">
				<div class="roll-out-menu" data-ng-if="textelement.type == 'Paragraph'">
					<ul class="nav nav-pills nav-stacked show-on-focus">
						<li class="sort-handle" ><a href="javascript:void(0)">Move</a></li>
						<li><a href="javascript:void(0)">Split</a></li>
						<li><a data-ng-click="deleteElement(textelement, $index)" href="javascript:void(0)">Delete</a></li>
						<li><a data-ng-click="createParagraph($index, document.id)" href="javascript:void(0)">Add Text</a></li>
						<li><a data-ng-click="createHeadline($index, document.id)" href="javascript:void(0)">Add Headline</a></li>
						<li><a data-ng-if="!textelement.comment" data-ng-click="activateComment(textelement, $event)" href="javascript:void(0)">Add Comment</a></li>
						<li><a data-ng-if="textelement.comment" data-ng-click="deleteComment(textelement)" href="javascript:void(0)">Delete Comment</a></li>
					</ul>
				</div>
				<div class="roll-out-menu" data-ng-if="textelement.type == 'Headline'">
					<ul class="nav nav-pills nav-stacked show-on-focus">
						<li class="sort-handle"><a href="javascript:void(0)">Move</a></li>
						<li ng-disabled="textelement.size < 2"><a data-ng-click="changeSize($event, textelement, -1)" href="javascript:void(0)"> Bigger </a></li>
						<li ng-disabled="textelement.size > 5"><a data-ng-click="changeSize($event, textelement, 1)" href="javascript:void(0)"> Smaller </a></li>
						<li><a data-ng-click="deleteElement(textelement, $index)" href="javascript:void(0)"> Delete </a></li>
						<li><a data-ng-click="createParagraph($index, document.id)" href="javascript:void(0)"> Add Text </a></li>
						<li><a data-ng-click="createHeadline($index, document.id)" href="javascript:void(0)"> Add Headline </a></li>
					</ul>
				</div>
			</div>
			<div class="col-xs-8" data-ng-if="textelement.type == 'Paragraph'">
				<!-- Merge -->
				<div class="merge-top merge show-on-focus">
					<button type="button" class="btn btn-default merge">
						<span class="glyphicon glyphicon-arrow-up"></span> Merge
					</button>
				</div>
				<!-- content -->
				<div class="paragraph">
					<div>
						<textarea class="main" data-ng-model="textelement.text"
								data-ng-click="activateElement(textelement.id)"
								data-ng-change="change()" data-ng-blur="saveDoc()"></textarea>
					</div>
					
				</div>
				<!-- Merge -->
				<div class="merge-bottom merge show-on-focus">
					<button type="button" class="btn btn-default merge">
						<span class="glyphicon glyphicon-arrow-down"></span> Merge
					</button>
				</div>
				<!-- Merge Ende -->
			</div>
			<div class="col-xs-8" data-ng-if="textelement.type == 'Headline'">
				<h3 data-ng-class="'size_'+textelement.size"
					data-ng-click="activateElement(textelement.id)">
					<textarea class="headline" data-ng-model="textelement.text"
							data-ng-change="change()" data-ng-blur="saveDoc()"></textarea>
				</h3>
				
			</div>
			<div class="col-xs-2">
				<!--  Rueckseite -->
				<textarea class="comment" id="{{textelement.id}}" data-ng-if="textelement.comment" data-ng-model="textelement.comment" data-ng-change="change()" data-ng-blur="saveDoc()"></textarea>
			</div>
		</div>
	</div>
</div>

}
